<!DOCTYPE html>
<html>
<title>W3.CSS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<body>
<div class="w3-container">
  <h2>Tiendita</h2>
  <button onclick="agregarProducto()"> Agregar producto</button>
  <br>
  <br>
  <div class="w3-responsive">
    <table class="w3-table-all w3-hoverable">
      <thead>
      <tr class="w3-light-grey">
        <th>Borrar</th>
        <th>Producto</th>
        <th>Cantidad</th>
        <th>Precio</th>
        <th>Total</th>
      </tr>
      </thead>
      <tbody id="cuerpo_tabla">
      </tbody>
    </table>
    <br>
  </div>
  <input type="text" id="granTotal" placeholder="Gran Total" >
</div>
<script>
  function agregarProducto() {
    const cuerpoTabla = document.getElementById("cuerpo_tabla");
    const renglon = document.createElement("tr");
    const col_borrar = document.createElement("td");
    const col_producto = document.createElement("td");
    const col_cantidad = document.createElement("td");
    const col_precio = document.createElement("td");
    const col_total = document.createElement("td");

    const input_producto = document.createElement("input");
    const input_cantidad = document.createElement("input");
    const input_precio = document.createElement("input");
    const input_total = document.createElement("input");
    const input_borrar = document.createElement("button");

    input_total.type = "text";
    input_total.readOnly = true;
    col_total.appendChild(input_total);

    input_borrar.innerHTML = "X";
    input_borrar.onclick = function() {
      renglon.parentNode.removeChild(renglon);
      actualizarGranTotal();
    };

    input_producto.oninput = function() {actualizarTotal(renglon);};
    input_cantidad.oninput = function() {cantidadTotal(renglon);};
    input_precio.oninput = function() {cantidadTotal(renglon);};
    col_borrar.appendChild(input_borrar);
    col_producto.appendChild(input_producto);
    col_cantidad.appendChild(input_cantidad);
    col_precio.appendChild(input_precio);
    col_total.appendChild(input_total);
    renglon.appendChild(col_borrar);
    renglon.appendChild(col_producto);
    renglon.appendChild(col_cantidad);
    renglon.appendChild(col_precio);
    renglon.appendChild(col_total);
    cuerpoTabla.appendChild(renglon);
  }
  function cantidadTotal(renglon) {
    const cantidad = parseFloat(renglon.children[2].children[0].value);
    const precio = parseFloat(renglon.children[3].children[0].value);
    const total = cantidad * precio;
    renglon.children[4].children[0].value = total.toFixed(2);
    actualizarGranTotal();
  }
  function actualizarTotal(renglon) {cantidadTotal(renglon);}
  function actualizarGranTotal() {
    const granTotal = document.getElementById("granTotal");
    let total = 0;
    const cuerpoTabla = document.getElementById("cuerpo_tabla");
    for (let i = 0; i < cuerpoTabla.children.length; i++) {
      const renglon = cuerpoTabla.children[i];
      const inputTotal = renglon.children[4].children[0];
      total += parseFloat(inputTotal.value);
    }
    granTotal.value = total.toFixed(2);
  }
</script>
</body>
</html>